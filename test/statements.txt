# If statements

if a
  b()
elseif c
  d()
  d()
else
  e()
end

# empty bodies
if a
elseif b
else
end

==>

SourceFile(
  IfStatement(
    IfClause(if,Identifier),
    CallExpression(Identifier,ArgumentList),
    ElseifClause(
      IfClause(elseif,Identifier),
      CallExpression(Identifier,ArgumentList),
      CallExpression(Identifier,ArgumentList)
    ),
    ElseClause(
      else,
      CallExpression(Identifier,ArgumentList)
    ),
    end
  ),
  Comment,
  IfStatement(
    IfClause(if,Identifier),
    ElseifClause(IfClause(elseif,Identifier)),
    ElseClause(else),
    end
  )
)

# For statements

for i in [1, 2, 3]
  print(i)
end

for (a, b) in c
  print(a, b)
end

==>

SourceFile(
  ForStatement(
    for,
    ForBinding(
      Identifier,
      AssignOperator(in),
      ArrayExpression(Number,Number,Number)
    ),
    CallExpression(Identifier,ArgumentList(Identifier)),
    end
  ),
  ForStatement(
    for,
    ForBinding(
      TupleExpression(Identifier,Identifier),
      AssignOperator(in),
      Identifier
    ),
    CallExpression(Identifier,ArgumentList(Identifier,Identifier)),
    end
  )
)

# While statements

while i < 5
  print(i)
  continue
  break
end

while a(); b(); end
while a() b(); end

==>

SourceFile(
  WhileStatement(
    while,
    WhileBinding(BinaryExpression(Identifier,Number)),
    CallExpression(Identifier,ArgumentList(Identifier)),
    ContinueStatement(continue),
    BreakStatement(break),
    end
  ),
  WhileStatement(
    while,
    WhileBinding(CallExpression(Identifier,ArgumentList)),
    CallExpression(Identifier,ArgumentList),
    end
  ),
  WhileStatement(
    while,
    WhileBinding(CallExpression(Identifier,ArgumentList)),
    CallExpression(Identifier,ArgumentList),
    end
  )
)

# Return statements

return
return a
return a || b
return a, b, c

==>

SourceFile(
  ReturnStatement(return),
  ReturnStatement(return,
    Identifier),
  ReturnStatement(return,
    BinaryExpression(Identifier,Identifier)),
  ReturnStatement(return,
    BareTuple(Identifier,Identifier,Identifier))
)

# Let statements

let var1 = value1, var2, var3 = value3
    code
end

==>

SourceFile(
  LetStatement(let,
    LetBinding(
      AssignmentExpression(Identifier,Identifier),
      Identifier,
      AssignmentExpression(Identifier,Identifier),
    ),
    Identifier,
    end
  )
)

# Const statements

const x, y = 5

==>

SourceFile(
  ConstStatement(
    const,
    AssignmentExpression(
      BareTuple(Identifier,Identifier),
      Number,
    ),
  ),
)


# Quote statements

quote
  x = 1
  y = 2
  x + y
end

==>

SourceFile(
  QuoteStatement(quote,
    AssignmentExpression(Identifier,Number),
    AssignmentExpression(Identifier,Number),
    BinaryExpression(Identifier,Identifier),
    end
  )
)

# Try statements

try
    sqrt(x)
catch
    sqrt(complex(x, 0))
end

try
    operate_on_file(f)
finally
    close(f)
end

==>

SourceFile(
  TryStatement(try,
    CallExpression(Identifier,ArgumentList(Identifier)),
    CatchClause(catch,
      CallExpression(
        Identifier,
        ArgumentList(
          CallExpression(Identifier,ArgumentList(Identifier,Number))
        )
      )
    ),
    end
  ),
  TryStatement(try,
    CallExpression(Identifier,ArgumentList(Identifier)),
    FinallyClause(finally,
      CallExpression(Identifier,ArgumentList(Identifier))
    ),
    end
  )
)

# Import statements

using Lib
using BigLib: thing1, thing2
import Base.show
import .A: @b
using A, B, C
import A as B
import A.B as C
import CSV: a as b
import A: a as b, b as a, c
using A: a as c
import Pkg: Artifacts.archive_artifacts as aa
import Base: + as -
using Printf: @sprintf as @format

==>

SourceFile(
  ImportStatement(
    using,
    Imports(Import(Identifier))
  ),
  ImportStatement(
    using,
    SelectedImport(
      Import(Identifier),
      Imports(Import(Identifier),",",Import(Identifier))
    )
  ),
  ImportStatement(
    import,
    Imports(
      Import(Identifier,Property(".",Identifier))
    )
  ),
  ImportStatement(
    import,
    SelectedImport(
      Import(".",Identifier),
      Imports(
        Import(MacroIdentifier(MacroName))
      )
    )
  ),
  ImportStatement(
    using,
    Imports(
      Import(Identifier),
      ",",
      Import(Identifier),
      ",",
      Import(Identifier)
    )
  ),
  ImportStatement(import,Imports(Import(Identifier,Rename(as,Identifier)))),
  ImportStatement(import,Imports(Import(Identifier,Property(".",Identifier),Rename(as,Identifier)))),
  ImportStatement(import,SelectedImport(Import(Identifier),Imports(Import(Identifier,Rename(as,Identifier))))),
  ImportStatement(import,SelectedImport(Import(Identifier),Imports(Import(Identifier,Rename(as,Identifier)),",",Import(Identifier,Rename(as,Identifier)),",",Import(Identifier)))),
  ImportStatement(using,SelectedImport(Import(Identifier),Imports(Import(Identifier,Rename(as,Identifier))))),
  ImportStatement(import,SelectedImport(Import(Identifier),Imports(Import(Identifier,Property(".",Identifier),Rename(as,Identifier))))),
  ImportStatement(import,SelectedImport(Import(Identifier),Imports(Import(Operator,Rename(as,Operator))))),
  ImportStatement(using,SelectedImport(Import(Identifier),Imports(Import(MacroIdentifier(MacroName),Rename(as,MacroIdentifier(MacroName))))))
)

# Export statements

export a
export a, b, c

==>

SourceFile(
  ExportStatement(export,Identifier),
  ExportStatement(export,Identifier,Identifier,Identifier)
)

# Comments

# comment
#= comment =#
#=
comment
=#
x = #= comment =# 1

#=
nested #= comments =# =#
#==#

==>

SourceFile(
  Comment,
  BlockComment,
  BlockComment,
  AssignmentExpression(Identifier,BlockComment,Number),
  BlockComment,
  BlockComment,
)
