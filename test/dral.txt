# Let statements without declarations

let
    code
end

==>

SourceFile(
  LetStatement(let,
    Identifier,
    end
  )
)


# Escaped backslash

"\\" # i am a comment "

==>

SourceFile(String, Comment)


# Prefixed strings

z = md"$(x)"

==>

SourceFile(
  AssignmentExpression(
    Identifier,
    PrefixedString(Identifier,StringWithoutInterpolation),
  ),
)


# Macro with @ at the beginning

@Test.test 1 == 1

==>

SourceFile(
  MacroExpression(
    MacroFieldExpression(MacroIdentifier(MacroName),MacroFieldName),
    MacroArgumentList(BinaryExpression(Number,Number))
  )
)


# Symbol with operator

:if

==>

SourceFile(Symbol(SymbolName))


# Keyword as fieldname

object.if

==>

SourceFile(FieldExpression(Identifier,FieldName))


# Multiple assignments

const x = a, b

==>

SourceFile(
  ConstStatement(
    const,
    AssignmentExpression(
      Identifier,
      BareTupleExpression(Identifier,Identifier)
    ),
  ),
)


# Transpose

A'B:C'D

==>

SourceFile(
  RangeExpression(
    TransposeExpression(Identifier,Identifier),
    TransposeExpression(Identifier,Identifier),
  ),
)


# IDK

begin
	function under_root(x)
		ret = 2exp(+x+2) + 1
	end
end

==>

SourceFile(
  CompoundExpression(
    begin,
    FunctionDefinition(
      function,
      Identifier,
      ArgumentList(Identifier),
      AssignmentExpression(
        Identifier,
        BinaryExpression(
          CoefficientExpression(
            Number,
            CallExpressionCoeffecient(
              Identifier,
              ArgumentList(BinaryExpression(UnaryExpression(Identifier),Number)),
            ),
          ),
          Number,
        ),
      ),
      end
    ),
    end,
  )
)

# IDK2

2xxx()

==>

SourceFile(
  CoefficientExpression(
    Number,
    CallExpressionCoeffecient(Identifier,ArgumentList),
  ),
)


# Macro do call
@test() do x, y

end

==>

SourceFile(
  MacroExpression(
    MacroIdentifier(MacroName),
    ArgumentList,
    DoClause(
      do,
      DoClauseArguments(BareTupleExpression(Identifier,Identifier)),
      end
    ),
  )
)


# Proper terminator

if true end
if true
end
if true x end
if true x else end
if true x else y end

==>

SourceFile(
  IfStatement(IfClause(if,Identifier),end),
  IfStatement(IfClause(if,Identifier),end),
  IfStatement(IfClause(if,Identifier),Identifier,end),
  IfStatement(IfClause(if,Identifier),Identifier,ElseClause(else),end),
  IfStatement(IfClause(if,Identifier),Identifier,ElseClause(else,Identifier),end),
)


